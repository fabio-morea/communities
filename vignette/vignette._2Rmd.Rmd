
---
title: "Vignette: Network Functions"
author: "Fabio Morea"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Network Functions}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
require(communities)
```

# Introduction

This vignette introduces several network analysis functions, including how to calculate co-occurrence, assign community labels, generate layouts based on community distances, and build community networks from existing graph objects.

## Function: `co_occurrence`

The `co_occurrence` function computes a normalized co-occurrence matrix from a set of community detection solutions. It measures how frequently nodes appear together in the same community across multiple trials and weights the co-occurrence by a specified importance factor `alpha` for each trial.

### Arguments:

- `M`: A matrix where each column represents a community detection result from a different trial, and each row corresponds to a node.
- `names`: A vector of node names corresponding to the rows of the matrix `M`.
- `alpha`: A numeric vector of weights for each trial.

### Value:

A symmetric matrix where each entry represents the weighted co-occurrence count of node pairs across all trials.

### Example:
```{r}
# Assume M is a matrix of community memberships across trials
co_matrix <- co_occurrence(M, names = V(g)$name, alpha = rep(1, ncol(M)))
```

---

## Function: `comm_label_as_strongest`

The `comm_label_as_strongest` function assigns community labels to nodes based on the strongest edge connecting each node. This helps assign nodes to communities based on their most significant interaction.

### Arguments:

- `g`: An iGraph object representing the network.

### Value:

A vector of community labels for each node in the graph.

### Example:
```{r}
# Example of assigning community labels based on strongest edge
community_labels <- comm_label_as_strongest(g)
```

---

## Function: `layout_distance_comm`

The `layout_distance_comm` function calculates a layout for graph visualization that emphasizes the distances between communities.

### Arguments:

- `g`: An iGraph object representing the network.
- `membership`: A vector of community memberships.
- `eps`: A small threshold to determine proximity between nodes.

### Value:

A matrix of node positions for plotting the network.

### Example:
```{r}
# Example layout based on distances between communities
distances <- layout_distance_comm(g, membership, eps = 0.15)
```

---

## Function: `make_community_network`

The `make_community_network` function constructs a new network where each node represents a community within the original network.

### Arguments:

- `g`: An iGraph object representing the original network.

### Value:

An iGraph object representing the community network.

### Example:
```{r}
# Create a community network from the original iGraph object
community_network <- make_community_network(g)
```

 
